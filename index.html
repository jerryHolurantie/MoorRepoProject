<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./style/index.css">
    <link rel="stylesheet" href="./style/add_form.css">
    <script src="./script/actions.js"></script>
    <title>Moor Repo</title>
</head>
<body>
    <div class="navbar">
        <div class="logo"><span class="point-one"></span>MoorRepo<span class="point"></span></div>
        <div class="search">
            <input type="text" name="" id="search_text" placeholder="search using keyword ex: 'calculator' 'c#'" >
            <div class="search_button" onclick="search()"><img src="./assets/icons/search.svg" alt="" width="15px"></div>
        </div>
        <div class="add_new"><img src="./assets/icons/post.svg" alt="" width="25px"></div>
    </div>
    <div class="projects">
        
    </div>
    <div class="new_project">
        <div class="add_container">
            <div class="close_btn"><img src="" alt="" srcset=""></div>
            <div class="add_title">Add New Project</div>
            <form action="" method="post" id="add_form" enctype="multipart/form-data">
                <div class="title_counter">0/70</div>
                <input type="text" name="project_title" id="project_title" placeholder="Project Title" maxlength="70">
                <div class="desc_counter">0/150</div>
                <textarea type="text" name="project_desc" id="project_desc" placeholder="Project Description"  maxlength="150"></textarea>
                <input type="text" name="project_authors" id="project_authors" placeholder="Author(s)" maxlength="70">

                <div class="upload_group">
                    <div class="upload thesis_upload">
                        <div class="thesis_upload_details">No File Chosen</div>
                        <label for="thesis">Upload Project Thesis</label>
                        <input type="file" name="thesis" id="thesis" accept=".docx, .doc, .pdf" hidden>
                    </div>
                    <div class="upload project_upload">
                        <div class="project_upload_details">No File Chosen</div>
                        <label for="project_zip">Upload Project Zip</label>
                        <input type="file" name="project_zip" id="project_zip" accept=".zip" hidden>
                    </div>
                </div>
                <div class="add_form_btn_group">
                    <input type="reset" value="Clear" id="clear">
                    <input type="button" onclick="submitForm()" value="Done" id="done">
                </div>
            </form>
        </div>
    </div>

    <div class="view_project">
        <div class="view_form">
            <div class="close_view" onclick="closeView()"><img src="" alt="" srcset=""></div>
            <div class="view_title">Title</div>
            <div class="view_author"></div>
            <div class="view_desc"></div>
            <div class="download">
                <a href="" class="download_thesis">Download Thesis</a>
                <a href="" class="download_zip">Download Source Code</a>
            </div>
        </div>
    </div>
</body>
<script src="./script/add_page_navigation.js"></script>
<script src="./script/counter.js"></script>
<script>
    const thesis = document.querySelector("#thesis"),
        project_zip = document.querySelector("#project_zip"),
        thesis_details = document.querySelector(".thesis_upload_details"),
        zip_details = document.querySelector(".project_upload_details");

    const validateUpload = (file, ext_arr, label) => {
        if(ext_arr.indexOf(file.files[0].name.split(".")[1]) < 0){
            alert(`Invalid File Format! Try (${ext_arr.map(e => e)})`);
            return
        }
        label.textContent = file.files[0].name;
    }

    thesis.onchange = () => {
        validateUpload(thesis, ["docx", "doc", "pdf"], thesis_details);
    }
    project_zip.onchange = () => {
        validateUpload(project_zip, ["zip"], zip_details);
    }
</script>
</html>